<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000000;
            color: #ffffff;
            overflow-x: hidden;
            padding-bottom: 120px;
        }

        /* Snow Animation */
        .snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .snowflake {
            position: absolute;
            top: -10px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 1em;
            animation: fall linear infinite;
            user-select: none;
        }

        @keyframes fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Main Layout */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px 0;
            border-bottom: 2px solid #333;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 300;
            letter-spacing: 2px;
            color: #ffffff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        /* Songs Container with Scrollbar */
        .songs-container {
            max-height: calc(100vh - 300px);
            overflow-y: auto;
            padding-right: 10px;
        }

        /* Custom Scrollbar */
        .songs-container::-webkit-scrollbar {
            width: 12px;
        }

        .songs-container::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 6px;
        }

        .songs-container::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 6px;
            border: 2px solid #1a1a1a;
        }

        .songs-container::-webkit-scrollbar-thumb:hover {
            background: #666;
        }

        /* Song Grid */
        .song-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px 0;
        }

        /* Song Items */
        .song-item {
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .song-box {
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 12px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .song-item:hover .song-box {
            background: #2a2a2a;
            border-color: #555;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }

        .song-item.active .song-box {
            background: #333;
            border-color: #666;
        }

        .song-item.playing .song-box {
            border-color: #ffffff;
            background: #2a2a2a;
            box-shadow: 0 0 20px rgba(255,255,255,0.1);
        }

        .song-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            border: 1px solid #444;
            flex-shrink: 0;
        }

        .song-info {
            flex: 1;
            min-width: 0;
        }

        .song-title {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 5px;
            color: #ffffff;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .song-artist {
            font-size: 0.9rem;
            color: #aaa;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Tooltip */
        .tooltip {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 10;
            border: 1px solid #444;
        }

        .song-item:hover .tooltip {
            opacity: 1;
            visibility: visible;
            bottom: -35px;
        }

        /* Fixed Audio Player */
        .audio-player-fixed {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, #1a1a1a 0%, #000000 100%);
            border-top: 2px solid #333;
            padding: 15px 20px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .player-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .player-left {
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 250px;
            flex-shrink: 0;
        }

        .current-song-image {
            width: 50px;
            height: 50px;
            border-radius: 6px;
            object-fit: cover;
            border: 1px solid #444;
        }

        .song-details h3 {
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 2px;
            color: #ffffff;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 180px;
        }

        .song-details p {
            font-size: 0.8rem;
            color: #aaa;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 180px;
        }

        .player-center {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .player-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .control-btn {
            background: transparent;
            border: 2px solid #444;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: #ffffff;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            border-color: #666;
            background: #2a2a2a;
            transform: scale(1.05);
        }

        .play-btn {
            width: 50px;
            height: 50px;
            font-size: 16px;
            border-color: #ffffff;
        }

        .play-btn:hover {
            background: #ffffff;
            color: #000000;
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
            max-width: 500px;
        }

        .time {
            font-size: 0.8rem;
            color: #aaa;
            min-width: 35px;
            text-align: center;
        }

        .progress-bar {
            flex: 1;
            height: 4px;
            background: #333;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
            transition: height 0.2s ease;
        }

        .progress-bar:hover {
            height: 6px;
        }

        .progress-fill {
            height: 100%;
            background: #ffffff;
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s ease;
            position: relative;
        }

        .progress-handle {
            position: absolute;
            top: 50%;
            right: -6px;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: #ffffff;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .progress-bar:hover .progress-handle {
            opacity: 1;
        }

        .player-right {
            display: flex;
            align-items: center;
            min-width: 150px;
            justify-content: flex-end;
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-btn {
            background: transparent;
            border: none;
            color: #ffffff;
            font-size: 16px;
            cursor: pointer;
            padding: 5px;
            transition: color 0.3s ease;
        }

        .volume-btn:hover {
            color: #ccc;
        }

        .volume-slider {
            width: 80px;
            height: 4px;
            background: #333;
            border-radius: 2px;
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: #ffffff;
            border-radius: 50%;
            cursor: pointer;
        }

        .volume-slider::-moz-range-thumb {
            width: 12px;
            height: 12px;
            background: #ffffff;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        /* Play indicator */
        .song-item.playing::after {
            content: '♪';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            color: #ffffff;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .song-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 15px;
            }
            
            .player-content {
                gap: 15px;
            }
            
            .player-left {
                min-width: 200px;
            }
            
            .song-details h3,
            .song-details p {
                max-width: 130px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .song-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .song-box {
                padding: 12px;
            }
            
            .song-image {
                width: 60px;
                height: 60px;
            }
            
            .player-content {
                flex-direction: column;
                gap: 10px;
            }
            
            .player-left,
            .player-right {
                min-width: auto;
                width: 100%;
                justify-content: center;
            }
            
            .progress-container {
                max-width: 100%;
            }
            
            .audio-player-fixed {
                padding: 12px 15px;
            }
            
            body {
                padding-bottom: 140px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .song-box {
                padding: 10px;
                gap: 10px;
            }
            
            .song-image {
                width: 50px;
                height: 50px;
            }
            
            .song-title {
                font-size: 1rem;
            }
            
            .song-artist {
                font-size: 0.8rem;
            }
            
            .control-btn {
                width: 35px;
                height: 35px;
                font-size: 12px;
            }
            
            .play-btn {
                width: 45px;
                height: 45px;
                font-size: 14px;
            }
            
            .player-controls {
                gap: 10px;
            }
            
            .volume-slider {
                width: 60px;
            }
            
            body {
                padding-bottom: 160px;
            }
        }

        /* Focus states for accessibility */
        .control-btn:focus,
        .volume-slider:focus,
        .progress-bar:focus,
        .song-item:focus {
            outline: 2px solid #ffffff;
            outline-offset: 2px;
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Selection styling */
        ::selection {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
        }

        /* Firefox scrollbar */
        .songs-container {
            scrollbar-width: thin;
            scrollbar-color: #444 #1a1a1a;
        }

        /* Loading animation */
        @keyframes loading {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        .loading {
            animation: loading 1.5s infinite;
        }
    </style>
</head>
<body>
    <!-- Snow particles background -->
    <div class="snow-container" id="snowContainer"></div>
    
    <div class="container">
        <header class="header">
            <h1>Music Collection</h1>
        </header>
        
        <main class="main-content">
            <div class="songs-container">
                <div class="song-grid" id="songGrid">
                    <!-- Song 1 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" data-title="SoundHelix Song 1">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/333333/FFFFFF?text=Song+1" alt="Song 1" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 1</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 1</div>
                    </div>
                    
                    <!-- Song 2 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" data-title="SoundHelix Song 2">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/666666/FFFFFF?text=Song+2" alt="Song 2" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 2</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 2</div>
                    </div>
                    
                    <!-- Song 3 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3" data-title="SoundHelix Song 3">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/999999/FFFFFF?text=Song+3" alt="Song 3" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 3</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 3</div>
                    </div>
                    
                    <!-- Song 4 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3" data-title="SoundHelix Song 4">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/CCCCCC/000000?text=Song+4" alt="Song 4" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 4</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 4</div>
                    </div>
                    
                    <!-- Song 5 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3" data-title="SoundHelix Song 5">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/444444/FFFFFF?text=Song+5" alt="Song 5" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 5</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 5</div>
                    </div>
                    
                    <!-- Song 6 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3" data-title="SoundHelix Song 6">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/777777/FFFFFF?text=Song+6" alt="Song 6" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 6</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 6</div>
                    </div>
                    
                    <!-- Song 7 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3" data-title="SoundHelix Song 7">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/AAAAAA/000000?text=Song+7" alt="Song 7" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 7</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 7</div>
                    </div>
                    
                    <!-- Song 8 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3" data-title="SoundHelix Song 8">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/555555/FFFFFF?text=Song+8" alt="Song 8" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 8</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 8</div>
                    </div>

                    <!-- Song 9 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3" data-title="SoundHelix Song 9">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/888888/FFFFFF?text=Song+9" alt="Song 9" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 9</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 9</div>
                    </div>

                    <!-- Song 10 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3" data-title="SoundHelix Song 10">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/BBBBBB/000000?text=Song+10" alt="Song 10" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 10</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 10</div>
                    </div>

                    <!-- Song 11 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-11.mp3" data-title="SoundHelix Song 11">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/222222/FFFFFF?text=Song+11" alt="Song 11" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 11</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 11</div>
                    </div>

                    <!-- Song 12 -->
                    <div class="song-item" data-song="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-12.mp3" data-title="SoundHelix Song 12">
                        <div class="song-box">
                            <img src="https://via.placeholder.com/120x120/DDDDDD/000000?text=Song+12" alt="Song 12" class="song-image">
                            <div class="song-info">
                                <h3 class="song-title">SoundHelix Song 12</h3>
                                <p class="song-artist">SoundHelix</p>
                            </div>
                        </div>
                        <div class="tooltip">SoundHelix Song 12</div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Fixed Audio Player at Bottom -->
    <div class="audio-player-fixed" id="audioPlayer">
        <div class="player-content">
            <div class="player-left">
                <img id="currentSongImage" src="https://via.placeholder.com/60x60/333333/FFFFFF?text=♪" alt="Current Song" class="current-song-image">
                <div class="song-details">
                    <h3 id="currentSongTitle">Select a song to play</h3>
                    <p id="currentSongArtist">No artist</p>
                </div>
            </div>
            
            <div class="player-center">
                <div class="player-controls">
                    <button id="prevBtn" class="control-btn">
                        <span>⏮</span>
                    </button>
                    <button id="playPauseBtn" class="control-btn play-btn">
                        <span class="play-icon">▶</span>
                        <span class="pause-icon" style="display: none;">⏸</span>
                    </button>
                    <button id="nextBtn" class="control-btn">
                        <span>⏭</span>
                    </button>
                </div>
                
                <div class="progress-container">
                    <span id="currentTime" class="time">0:00</span>
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-fill" id="progressFill"></div>
                        <div class="progress-handle" id="progressHandle"></div>
                    </div>
                    <span id="duration" class="time">0:00</span>
                </div>
            </div>
            
            <div class="player-right">
                <div class="volume-container">
                    <button class="volume-btn" id="volumeBtn">🔊</button>
                    <input type="range" id="volumeSlider" min="0" max="100" value="50" class="volume-slider">
                </div>
            </div>
        </div>
        
        <audio id="audioElement" preload="metadata" crossorigin="anonymous"></audio>
    </div>
    
    <script>
        class MusicPlayer {
            constructor() {
                this.audio = document.getElementById('audioElement');
                this.playPauseBtn = document.getElementById('playPauseBtn');
                this.prevBtn = document.getElementById('prevBtn');
                this.nextBtn = document.getElementById('nextBtn');
                this.progressBar = document.getElementById('progressBar');
                this.progressFill = document.getElementById('progressFill');
                this.volumeSlider = document.getElementById('volumeSlider');
                this.volumeBtn = document.getElementById('volumeBtn');
                this.currentTime = document.getElementById('currentTime');
                this.duration = document.getElementById('duration');
                this.currentSongTitle = document.getElementById('currentSongTitle');
                this.currentSongArtist = document.getElementById('currentSongArtist');
                this.currentSongImage = document.getElementById('currentSongImage');
                this.playIcon = document.querySelector('.play-icon');
                this.pauseIcon = document.querySelector('.pause-icon');
                
                this.isPlaying = false;
                this.currentSong = null;
                this.currentIndex = -1;
                this.songs = [];
                this.isMuted = false;
                this.previousVolume = 50;
                
                this.initializeSongs();
                this.initializeEventListeners();
                this.setVolume(50);
                this.createSnowEffect();
            }
            
            initializeSongs() {
                const songItems = document.querySelectorAll('.song-item');
                this.songs = Array.from(songItems).map((item, index) => ({
                    element: item,
                    url: item.dataset.song,
                    title: item.dataset.title,
                    artist: item.querySelector('.song-artist').textContent,
                    image: item.querySelector('.song-image').src,
                    index: index
                }));
            }
            
            initializeEventListeners() {
                // Song selection
                this.songs.forEach((song, index) => {
                    song.element.addEventListener('click', () => {
                        this.loadSong(index);
                    });
                });
                
                // Play/Pause button
                this.playPauseBtn.addEventListener('click', () => {
                    this.togglePlayPause();
                });
                
                // Previous button
                this.prevBtn.addEventListener('click', () => {
                    this.previousSong();
                });
                
                // Next button
                this.nextBtn.addEventListener('click', () => {
                    this.nextSong();
                });
                
                // Progress bar
                this.progressBar.addEventListener('click', (e) => {
                    this.seekTo(e);
                });
                
                // Volume slider
                this.volumeSlider.addEventListener('input', (e) => {
                    this.setVolume(e.target.value);
                });
                
                // Volume button (mute/unmute)
                this.volumeBtn.addEventListener('click', () => {
                    this.toggleMute();
                });
                
                // Audio events
                this.audio.addEventListener('loadedmetadata', () => {
                    this.updateDuration();
                });
                
                this.audio.addEventListener('timeupdate', () => {
                    this.updateProgress();
                });
                
                this.audio.addEventListener('ended', () => {
                    this.nextSong();
                });
                
                this.audio.addEventListener('error', (e) => {
                    console.error('Audio error:', e);
                    this.showError('Failed to load audio file');
                });
                
                // Keyboard controls
                document.addEventListener('keydown', (e) => {
                    this.handleKeyboardControls(e);
                });
            }
            
            loadSong(index) {
                if (index < 0 || index >= this.songs.length) return;
                
                // Remove playing class from all songs
                this.songs.forEach(song => {
                    song.element.classList.remove('playing', 'active');
                });
                
                this.currentIndex = index;
                this.currentSong = this.songs[index];
                
                // Add active class
                this.currentSong.element.classList.add('active');
                
                this.audio.src = this.currentSong.url;
                this.currentSongTitle.textContent = this.currentSong.title;
                this.currentSongArtist.textContent = this.currentSong.artist;
                this.currentSongImage.src = this.currentSong.image;
                
                // Reset progress
                this.progressFill.style.width = '0%';
                this.currentTime.textContent = '0:00';
                this.duration.textContent = '0:00';
                
                // Auto play the song
                this.playSong();
            }
            
            togglePlayPause() {
                if (!this.currentSong) {
                    if (this.songs.length > 0) {
                        this.loadSong(0);
                    }
                    return;
                }
                
                if (this.isPlaying) {
                    this.pauseSong();
                } else {
                    this.playSong();
                }
            }
            
            playSong() {
                if (!this.currentSong) return;
                
                this.audio.play().then(() => {
                    this.isPlaying = true;
                    this.playIcon.style.display = 'none';
                    this.pauseIcon.style.display = 'inline';
                    this.currentSong.element.classList.add('playing');
                }).catch(error => {
                    console.error('Error playing audio:', error);
                    this.showError('Error playing the song. Please try another one.');
                });
            }
            
            pauseSong() {
                this.audio.pause();
                this.isPlaying = false;
                this.playIcon.style.display = 'inline';
                this.pauseIcon.style.display = 'none';
                if (this.currentSong) {
                    this.currentSong.element.classList.remove('playing');
                }
            }
            
            previousSong() {
                if (this.songs.length === 0) return;
                
                let newIndex = this.currentIndex - 1;
                if (newIndex < 0) {
                    newIndex = this.songs.length - 1;
                }
                this.loadSong(newIndex);
            }
            
            nextSong() {
                if (this.songs.length === 0) return;
                
                let newIndex = this.currentIndex + 1;
                if (newIndex >= this.songs.length) {
                    newIndex = 0;
                }
                this.loadSong(newIndex);
            }
            
            seekTo(e) {
                if (!this.currentSong || !this.audio.duration) return;
                
                const rect = this.progressBar.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const width = rect.width;
                const percentage = clickX / width;
                
                this.audio.currentTime = percentage * this.audio.duration;
            }
            
            setVolume(value) {
                this.audio.volume = value / 100;
                this.updateVolumeIcon(value);
                
                if (value > 0) {
                    this.isMuted = false;
                    this.previousVolume = value;
                }
            }
            
            toggleMute() {
                if (this.isMuted) {
                    this.setVolume(this.previousVolume);
                    this.volumeSlider.value = this.previousVolume;
                    this.isMuted = false;
                } else {
                    this.previousVolume = this.volumeSlider.value;
                    this.setVolume(0);
                    this.volumeSlider.value = 0;
                    this.isMuted = true;
                }
            }
            
            updateVolumeIcon(volume) {
                if (volume == 0 || this.isMuted) {
                    this.volumeBtn.textContent = '🔇';
                } else if (volume < 50) {
                    this.volumeBtn.textContent = '🔉';
                } else {
                    this.volumeBtn.textContent = '🔊';
                }
            }
            
            updateProgress() {
                if (!this.audio.duration) return;
                
                const percentage = (this.audio.currentTime / this.audio.duration) * 100;
                this.progressFill.style.width = percentage + '%';
                this.currentTime.textContent = this.formatTime(this.audio.currentTime);
            }
            
            updateDuration() {
                this.duration.textContent = this.formatTime(this.audio.duration);
            }
            
            formatTime(seconds) {
                if (isNaN(seconds)) return '0:00';
                
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = Math.floor(seconds % 60);
                return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
            }
            
            handleKeyboardControls(e) {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                    return;
                }
                
                switch(e.code) {
                    case 'Space':
                        e.preventDefault();
                        this.togglePlayPause();
                        break;
                    case 'ArrowLeft':
                        e.preventDefault();
                        this.previousSong();
                        break;
                    case 'ArrowRight':
                        e.preventDefault();
                        this.nextSong();
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        const currentVol = parseInt(this.volumeSlider.value);
                        const newVolUp = Math.min(100, currentVol + 10);
                        this.volumeSlider.value = newVolUp;
                        this.setVolume(newVolUp);
                        break;
                    case 'ArrowDown':
                        e.preventDefault();
                        const currentVolDown = parseInt(this.volumeSlider.value);
                        const newVolDown = Math.max(0, currentVolDown - 10);
                        this.volumeSlider.value = newVolDown;
                        this.setVolume(newVolDown);
                        break;
                    case 'KeyM':
                        e.preventDefault();
                        this.toggleMute();
                        break;
                }
            }
            
            showError(message) {
                const errorDiv = document.createElement('div');
                errorDiv.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #ff4444;
                    color: white;
                    padding: 15px 20px;
                    border-radius: 8px;
                    z-index: 10000;
                    font-size: 14px;
                    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                `;
                errorDiv.textContent = message;
                document.body.appendChild(errorDiv);
                
                setTimeout(() => {
                    errorDiv.remove();
                }, 3000);
            }
            
            createSnowEffect() {
                const snowContainer = document.getElementById('snowContainer');
                const snowflakeCount = 50;
                
                for (let i = 0; i < snowflakeCount; i++) {
                    this.createSnowflake(snowContainer);
                }
                
                setInterval(() => {
                    if (snowContainer.children.length < snowflakeCount) {
                        this.createSnowflake(snowContainer);
                    }
                }, 300);
            }
            
            createSnowflake(container) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');
                snowflake.innerHTML = '❄';
                
                const startPositionLeft = Math.random() * 100;
                const animationDuration = Math.random() * 3 + 2;
                const opacity = Math.random() * 0.6 + 0.4;
                const size = Math.random() * 0.8 + 0.8;
                
                snowflake.style.left = startPositionLeft + '%';
                snowflake.style.animationDuration = animationDuration + 's';
                snowflake.style.opacity = opacity;
                snowflake.style.fontSize = size + 'em';
                
                container.appendChild(snowflake);
                
                setTimeout(() => {
                    if (snowflake.parentNode) {
                        snowflake.remove();
                    }
                }, animationDuration * 1000);
            }
        }

        // Initialize the music player when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new MusicPlayer();
            
            // Add ripple effect to buttons
            const buttons = document.querySelectorAll('.control-btn');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.cssText = `
                        position: absolute;
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        background: rgba(255,255,255,0.3);
                        border-radius: 50%;
                        transform: scale(0);
                        animation: ripple 0.6s linear;
                        pointer-events: none;
                    `;
                    
                    this.style.position = 'relative';
                    this.style.overflow = 'hidden';
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
        });
    </script>
</body>
</html>
